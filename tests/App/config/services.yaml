services:
  _defaults:
    autowire: true
    autoconfigure: true

  Kununu\TestingBundle\Tests\App\Command\:
    resource: '../Command/*'

  Kununu\TestingBundle\Tests\App\Elasticsearch\ClientFactory: ~
  Kununu\TestingBundle\Tests\App\OpenSearch\ClientFactory: ~

  Elasticsearch\Client:
    factory: [ '@Kununu\TestingBundle\Tests\App\Elasticsearch\ClientFactory', 'getInstance' ]
    arguments:
      - [ '%elasticsearch_url%' ]

  OpenSearch\Client:
    factory: [ '@Kununu\TestingBundle\Tests\App\OpenSearch\ClientFactory', 'getInstance' ]
    arguments:
      - [ '%opensearch_url%' ]

  http_client:
    class: Kununu\DataFixtures\Tools\HttpClient
    public: true

  Symfony\Contracts\HttpClient\HttpClientInterface: '@http_client'

  Kununu\TestingBundle\Tests\App\Controller\AppController:
    public: true
    arguments:
      $client: '@http_client'

  Aws\DynamoDb\DynamoDbClient:
    class: Aws\DynamoDb\DynamoDbClient
    arguments:
      -
        version: 'latest'
        region: 'eu-west-1'
        endpoint: 'http://localhost:4566'
        credentials:
          key: 'test'
          secret: 'test'
    public: true
